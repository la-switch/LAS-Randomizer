# LAS-Randomizer
A randomizer for The Legend of Zelda: Link's Awakening remake. Currently still very early in development.

The early release version available now allows for shuffling all the chests in the game, and only the chests. More work will come soon.

Please note that this early in development, not everything is guaranteed to be functional, and there is a definite possibility of the logic resulting in softlocks. This will be especially true with the glitched logic. It is recommended to primarily play the basic logic and make backup saves before going into an area that you might not be able to exit (e.g. going into Angler Tunnel without the flippers or the feather and neither are there).

**NOTE**: There is a known issue with some seeds, rarely, getting stuck during generation. If this happens, just try again with a different seed. It should take in the vicinity of 10-20 seconds to generate, so much longer than that means it's probably stuck.

In order to run the randomizer, you must have the RomFS of the game extracted and on the device you're running this program from. This can be extracted through tools like [Hactool](https://github.com/SciresM/hactool). The RomFS is the component of the game package with all of the data files (i.e. non-executable files).

Join the [Discord](https://discord.com/invite/rfBSCUfzj8) to talk about the randomizer or ask any questions you have!  
The Discord also contains some more detailed information about the current state of the randomizer, including known issues and what is shuffled.

## How to run:

You will need to have Python 3 installed.  Version 3.9+ is recommended to be sure the program will work. You will also need to install 2 libraries through pip, pyyaml and evfl. It can be done with the following:

`pip install pyyaml`

`pip install evfl`

`pip install oead` (note that this library requires you to have the latest Visual C++ Redistributable on Windows, which you likely already have installed)

Now run the following on the command line from the directory with the randomizer code:

`python main.py <RomFS path> <output directory> <seed> <logic>`

First two arguments must be specified. The rom path should be the top level RomFS folder, i.e. the one which contains `region_common` etc.
The output directory is where the files generated by the randomizer will be created. This will be created if it doesn't exist, so you can just call it `outout` or something similar. For these file paths, please ensure you provide them using forward slashes (`/`) and not backslashes (`\`). Windows uses backslashes for file paths, so make sure you change them if you're copying one.

Seed can be any string. If specified as `random` (case insensitive), or omitted, it will use a random seed based on system time.

Valid logics are `basic`, `advanced`, `glitched`, and `none`. Omitting this will default to basic logic. Note that the advanced and glitched logics are not fully complete yet. No logic is almost certainly not beatable.

## Settings

You can choose different settings for your randomized game by editing `settings.yml`, which is a YAML file. You shouldn't have to know much about YAML to edit it beyond how what's already there is formatted. You can learn more here if you want: https://www.cloudbees.com/blog/yaml-tutorial-everything-you-need-get-started

`free-book`: Reading the book of dark secrets does not require the lens (to get the Egg path).  
`unlocked-bombs`: Bombs will be buyable from the start of the game instead of requiring the Conch Horn.  
`fast-trendy`: You'll receive the final prize from the shop owner by catching only one figure (Ciao Ciao).  
`fast-stealing`: The shopkeeper won't kill you after you steal an item.  
`assured-sword-shield`: The first sword and shield will be left in their normal locations (Tarin and the beach). Useful if you find it more enjoyable to have these basic tools for the whole game.  
`reduce-early-farming`: Aims to reduce time spent farming powder and bombs early in the game, which are logically accessible with just the bracelet from pots in Color Dungeon. The Color Dungeon guards will sell you 20 bombs in addition to the 20 powder they already sell you for 100 rupees (both in the same purchase), and this money is easily obtained from the rupee room here. Tarin will also give you 20 bombs in addition to the boots, if he has the boots. Furthermore, all singular bomb, powder, and arrow drops will be tripled.  
`excluded-locations`: A list of the names of locations which will be excluded from logic, meaning that they are guaranteed to not hold any important item (including seashells). They can hold anything else that's never required, even good items like tunics or capacity upgrades. Note that if you want to not have any excluded locations, you MUST replace the list of settings with `[]`. So the line should look like: `excluded-locations: []`.

## How to play:

To play the randomizer, you will need a homebrewed Switch console.

The randomizer does not provide a second copy of the game to use, but rather makes use of the LayeredFS system for applying game mods. The simple way to explain this system is that we will provide a secondary RomFS which is external to the game's internal RomFS, and will force the game to use any corresponding external file instead of the internal one, provided an external one exists. This functionality is simple to set up.

(See also: [Switch game modding](https://nh-server.github.io/switch-guide/extras/game_modding/))

On your SD card for your homebrew setup, navigate to the `Atmosphere/contents` folder and create a new directory named `01006BB00C6F0000`. Copy and paste the `RomFS` folder from the randomizer output into this new folder. That is, the folder structure here should look like `Atmosphere/contents/01006BB00C6F0000/RomFs/...`. After this, relaunch CFW and simply start up Link's Awakening to play the randomizer!

Applying this mod will not in any way affect your save data, so don't delete anything you don't want deleted. You will need to manually clear these files out of the mod folder to go back to the original game after.
